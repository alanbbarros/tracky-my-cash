<div class="app-shell">
  <app-top-bar
    [focusedMonth]="focusedMonth"
    [canGoPrevious]="canGoPrevious"
    [canGoNext]="canGoNext"
    (openNewEntry)="openModal()"
    (previousMonth)="goToPreviousMonth()"
    (nextMonth)="goToNextMonth()"
  ></app-top-bar>

  <ng-container *ngIf="!activeBudgetMonth; else monthlyBudgetView">
    <main class="content">
      <app-calendar-section
        [focusedMonth]="focusedMonth"
        [selectedDay]="selectedDay"
        (daySelect)="onSelectDay($event)"
      ></app-calendar-section>

      <app-details-panel
        [selectedDay]="selectedDay"
        [focusedMonth]="focusedMonth"
        (openBudget)="openBudget($event)"
      ></app-details-panel>
    </main>
  </ng-container>

  <ng-template #monthlyBudgetView>
    <app-monthly-budget
      [month]="activeBudgetMonth!"
      [categories]="budgetCategories"
      (closeBudget)="closeBudget()"
    ></app-monthly-budget>
  </ng-template>

  <app-entry-modal
    [isOpen]="isModalOpen"
    (closeModal)="closeModal()"
    (saveEntry)="onSaveEntry($event)"
  ></app-entry-modal>
</div>
