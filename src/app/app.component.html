<div class="app-shell">
  <app-top-bar
    [focusedCycle]="focusedCycle"
    [canNavigatePrevious]="canNavigatePrevious"
    [canNavigateNext]="canNavigateNext"
    (navigatePrevious)="onPreviousCycle()"
    (navigateNext)="onNextCycle()"
    (openNewEntry)="openModal()"
  ></app-top-bar>

  <ng-container *ngIf="!activeBudgetCycle; else monthlyBudgetView">
    <main class="content">
      <app-calendar-section
        [focusedCycle]="focusedCycle"
        [selectedDay]="selectedDay"
        (daySelect)="onSelectDay($event)"
      ></app-calendar-section>

      <app-details-panel
        [selectedDay]="selectedDay"
        [focusedCycle]="focusedCycle"
        (openBudget)="openBudget($event)"
      ></app-details-panel>
    </main>
  </ng-container>

  <ng-template #monthlyBudgetView>
    <app-monthly-budget
      [cycle]="activeBudgetCycle!"
      [categories]="budgetCategories"
      (closeBudget)="closeBudget()"
    ></app-monthly-budget>
  </ng-template>

  <app-entry-modal
    [isOpen]="isModalOpen"
    (closeModal)="closeModal()"
    (saveEntry)="onSaveEntry($event)"
  ></app-entry-modal>
</div>
