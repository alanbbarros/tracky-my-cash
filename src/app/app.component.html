<div class="app-shell">
  <app-top-bar [focusedMonth]="focusedMonth" (openNewEntry)="openModal()"></app-top-bar>

  <ng-container *ngIf="!activeBudgetMonth; else monthlyBudgetView">
    <app-month-summary [month]="focusedMonth" (openBudget)="openBudget($event)"></app-month-summary>

    <main class="content">
      <app-calendar-section
        [months]="months"
        [selectedDay]="selectedDay"
        (daySelect)="onSelectDay($event)"
        (monthFocus)="onFocusMonth($event)"
        (openBudget)="openBudget($event)"
      ></app-calendar-section>

      <app-details-panel
        [selectedDay]="selectedDay"
        [focusedMonth]="focusedMonth"
        (openBudget)="openBudget($event)"
      ></app-details-panel>
    </main>
  </ng-container>

  <ng-template #monthlyBudgetView>
    <app-monthly-budget
      [month]="activeBudgetMonth!"
      [categories]="budgetCategories"
      (closeBudget)="closeBudget()"
    ></app-monthly-budget>
  </ng-template>

  <app-entry-modal
    [isOpen]="isModalOpen"
    (closeModal)="closeModal()"
    (saveEntry)="onSaveEntry($event)"
  ></app-entry-modal>
</div>
